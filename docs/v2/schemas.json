{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "StreamIngestionRequest": {
    "type": "object",
    "properties": {
      "streamId": {
        "type": "string"
      },
      "initialPrompt": {
        "type": "string"
      },
      "initialSummary": {
        "type": "string"
      }
    },
    "required": ["streamId", "initialPrompt", "initialSummary"]
  },
  "IdOnly": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string"
      }
    },
    "required": ["id"]
  },
  "Stream": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "format": "uuid"
      },
      "title": {
        "type": "string"
      },
      "description": {
        "type": "string"
      },
      "duration": { "type": "number" },
      "created_at": { "type": "string", "format": "date-time" },
      "has_episodes": { "type": "boolean" },
      "prefix": { "type": "string" },
      "series_id": { "type": "string" },
      "stream_date": { "type": "string", "format": "date-time" },
      "updated_at": { "type": "string", "format": "date-time" },
      "stream_platform": { "type": "string" },
      "thumbnail_url": { "type": "string" },
      "video_clip_count": { "type": "number" }
    },
    "required": ["id"]
  },
  "Episode": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "format": "uuid"
      },
      "title": {
        "type": "string"
      },
      "description": {
        "type": "string"
      },
      "tracks": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "start": { "type": "string" },
            "end": { "type": "string" }
          }
        }
      },
      "stream_id": { "type": "string" }
    },
    "required": ["id"]
  },
  "Profile": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "format": "uuid"
      }
    },
    "required": ["id"]
  },
  "TranscriptSegment": {
    "type": "object",
    "properties": {
      "start": { "type": "number" },
      "end": { "type": "number" },
      "avg_logprob": { "type": "number" },
      "compression_ratio": { "type": "number" },
      "no_speech_prob": { "type": "number" },
      "temperature": { "type": "number" },
      "text": { "type": "string" }
    }
  },
  "VideoClip": {
    "type": "object",
    "properties": {
      "key": { "type": "string" },
      "keyframes": {
        "type": "array",
        "items": { "type": "string" }
      },
      "audio": { "type": "string" },
      "silence": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "start": { "type": "number" },
            "end": { "type": "number" }
          }
        }
      },
      "start_time": { "type": "number" },
      "stream_id": { "type": "string" },
      "metadata": {
        "type": "object",
        "properties": {
          "format": {
            "type": "object",
            "properties": {
              "duration": { "type": "number" }
            }
          }
        }
      },
      "transcription": {
        "type": "object",
        "properties": {
          "language": { "type": "string" },
          "text": { "type": "string" },
          "segments": {
            "type": "array",
            "items": { "$ref": "#/TranscriptSegment" }
          }
        }
      },
      "summary": {
        "type": "object",
        "properties": {
          "attentions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "timestamp_start": { "type": "number" },
                "timestamp_end": { "type": "number" },
                "description": { "type": "number" },
                "reasoning": { "type": "number" }
              }
            }
          },
          "highlights": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "timestamp_start": { "type": "number" },
                "timestamp_end": { "type": "number" },
                "description": { "type": "number" },
                "reasoning": { "type": "number" }
              }
            }
          },
          "keywords": {
            "type": "array",
            "items": { "type": "string" }
          },
          "summary_context": { "type": "string" },
          "summary_main_discussion": { "type": "string" },
          "title": { "type": "string" },
          "transcription_errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "timestamp_start": { "type": "number" },
                "description": { "type": "number" },
                "reasoning": { "type": "number" }
              }
            }
          }
        }
      }
    }
  },
  "TwitchAuthRequest": {
    "$comment": "Represents the request from the client to Glowing Telegram to authorize with Twitch",
    "type": "object",
    "properties": {
      "redirect_uri": {
        "type": "string",
        "format": "uri"
      }
    },
    "required": ["redirect_uri"]
  },
  "AuthorizationUrlResponse": {
    "$comment": "Represents the response from Glowing Telegram when the client requests the URL to authorize with Twitch",
    "type": "object",
    "properties": {
      "url": {
        "type": "string",
        "format": "uri"
      }
    },
    "required": ["url"]
  },
  "TwitchCallbackRequest": {
    "$comment": "Represents the query parameters that Twitch sends to the callback URL",
    "type": "object",
    "properties": {
      "code": { "type": "string" },
      "scope": { "type": "array", "items": { "type": "string" } },
      "state": { "type": "string" }
    },
    "required": ["code","state","scope"]
  },
  "TwitchCallbackError": {
    "$comment": "Represents the query parameters that Twitch sends to the callback URL when an error occurs",
    "type": "object",
    "properties": {
      "error": { "type": "string" },
      "error_description": { "type": "string" },
      "state": { "type": "string" }
    },
    "required": ["error","error_description","state"]
  },
  "AccessTokenResponse": {
    "$comment": "Represents the response from Glowing Telegram when the client requests the current user's access token",
    "type": "object",
    "properties": {
      "access_token": { "type": "string" }
    },
    "required": ["access_token"]
  },
  "TwitchAPITokenResponse": {
    "$comment": "Represents the response from Twitch when the auth flow is complete",
    "type": "object",
    "properties": {
      "access_token": { "type": "string" },
      "refresh_token": { "type": "string" },
      "expires_in": { "type": "number" },
      "scope": { "type": "array", "items": { "type": "string" } },
      "token_type": { "type": "string" }
    },
    "required": ["access_token","refresh_token","expires_in","scope","token_type"]
  },
  "SimpleChatMessage": {
    "$comment": "Represents a simple chat completion message",
    "type": "object",
    "properties": {
      "role": { "type": "string" },
      "content": { "type": "string" }
    },
    "required": ["role","content"]
  }
}
